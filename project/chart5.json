{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  

  "title":
  {
    "text": "The Rise and Fall of Population",
    "anchor": "middle",
    "subtitle": 
    [
      "Historic and predicted population trends.",
      "Select a country from the legend to isolate its trend"
    ],
    "subtitleFontSize": 10
  },


  "params": [
    {
      "name": "country",
      "select": {"type": "point", "fields": ["Country"]},
      "bind": "legend"
    }
  ],

  "resolve": {"scale": {"color": "independent"}},
  

  "vconcat": 
  [


    {
      "data":       
      {
        "url": "https://raw.githubusercontent.com/MaxTuu/MaxTuu.GitHub.io/main/project/graph7_popGrowth_data.json"
      },


      "mark": "bar",

      "height": 100,

  
      "encoding": {

        "x": {
          "field": "Start Year", 
          "type": "quantitative",
          "axis": null
          
        },

        "y": 
        {
          "field": "Growth", "type": "quantitative",
          "axis": 
          {
            "gridColor": 
            {
              "condition": 
              {"test": "datum.value === 0", 
              "value": "black"},
              "value": "#ddd"
            }
          }
        },

        "color": 
        {
          "field": "Growth", 
          "scale": {"scheme": "redyellowgreen"},
          "legend": null
        },

        "opacity": 
        {
          "condition": {"param": "country", "value": 1},
          "value": 0
        }

      }
    },    





      {
        "mark": "line",

        "transform": 
        [
          {
            "filter": {"param": "country"}
          }
        ],

        "data": 
        {
          "url": "https://raw.githubusercontent.com/MaxTuu/MaxTuu.GitHub.io/main/project/graph7_totalPop_data.json"
        },

        "encoding": 
        {
          "x": {
            
            "field": "Year",
            "type": "temporal",
            "title": null
            
          },
          "y": {
            
            "field": "totalPop",
            "type": "quantitative",
            "title": "Population (thousands)",
            "scale": {"zero": false}
          },
          "color": 
          {
            "field": "Country", 
            "scale": {"scheme": "inferno"},
            "legend":
            {
              "title": "",
              "orient": "bottom",
              "legendX": 100,
              "legendY": 0,
              "columns": 3
            }
          },
          "tooltip": {"field": "Country"}
        }
      }
  ]
}
